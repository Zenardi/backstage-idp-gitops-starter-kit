redis-ha:
  enabled: false

global:
  domain: argocd.local

configs:
  params:
    server.insecure: true

server:
  replicas: 1
  ingress:
    enabled: true
    ingressClassName: traefik
    tls: false
    hostname: argocd.local
    https: false

repoServer:
  replicas: 1
  livenessProbe:
    initialDelaySeconds: 60  # Espera 1 min antes de checar a primeira vez
    periodSeconds: 10
    timeoutSeconds: 30       # DÃ¡ 30s para o pod responder
    failureThreshold: 5

  readinessProbe:
    initialDelaySeconds: 60
    periodSeconds: 10
    timeoutSeconds: 30
    failureThreshold: 5

applicationSet:
  replicas: 1

controller:
  replicas: 1
  metrics:
    enabled: true
    service:
      type: ClusterIP
    serviceMonitor:
      enabled: true
      interval: 30s
      honorLabels: false
      relabelings: []
      metricRelabelings: []
      selector:
        prometheus: kube-prometheus
      namespace: "monitoring"
    rules:
      enabled: true
      namespace: "monitoring"
      spec:
      - alert: ArgoAppMissing
        expr: |
          absent(argocd_app_info) == 1
        for: 15m
        labels:
          severity: critical
        annotations:
          summary: "[Argo CD] No reported applications"
          description: >
            Argo CD has not reported any applications data for the past 15 minutes which
            means that it must be down or not functioning properly.  This needs to be
            resolved for this cloud to continue to maintain state.
      - alert: ArgoAppNotSynced
        expr: |
          argocd_app_info{sync_status!="Synced"} == 1
        for: 12h
        labels:
          severity: warning
        annotations:
          summary: "[{{`{{$labels.name}}`}}] Application not synchronized"
          description: >
            The application [{{`{{$labels.name}}`}} has not been synchronized for over
            12 hours which means that the state of this cloud has drifted away from the
            state inside Git.

# providers:
#   kubernetesingress:
#     ingressendpoint:
#       publishedservice: traefik/traefik

additionalArguments:
 - --providers.kubernetesingress.ingressendpoint.publishedservice=traefik/traefik